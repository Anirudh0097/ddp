Version 4
SHEET 1 1904 1260
WIRE 896 -544 768 -544
WIRE 960 -544 896 -544
WIRE 1024 -544 960 -544
WIRE 960 -480 960 -544
WIRE 1024 -432 1024 -544
WIRE 1024 -432 960 -432
WIRE 912 -400 832 -400
WIRE -496 -352 -640 -352
WIRE -16 -352 -496 -352
WIRE 592 -352 -16 -352
WIRE 672 -352 592 -352
WIRE 832 -304 832 -400
WIRE 960 -304 960 -384
WIRE 960 -304 832 -304
WIRE -496 -288 -496 -352
WIRE 592 -288 592 -352
WIRE 960 -272 960 -304
WIRE -368 -208 -448 -208
WIRE 80 -208 -368 -208
WIRE 480 -208 80 -208
WIRE 544 -208 480 -208
WIRE -16 -192 -16 -352
WIRE 480 -144 480 -208
WIRE 528 -144 480 -144
WIRE 544 -144 528 -144
WIRE 592 -144 592 -192
WIRE -496 -128 -496 -192
WIRE -368 -128 -368 -208
WIRE -368 -128 -432 -128
WIRE -16 -96 -16 -112
WIRE 1392 -96 1264 -96
WIRE 1504 -96 1392 -96
WIRE -16 -80 -16 -96
WIRE -16 -80 -160 -80
WIRE 144 -80 -16 -80
WIRE 592 -32 592 -144
WIRE 1264 -32 1264 -96
WIRE 1504 -32 1504 -96
WIRE -496 0 -496 -128
WIRE -160 0 -160 -80
WIRE 144 0 144 -80
WIRE 144 16 144 0
WIRE 1344 48 1312 48
WIRE 1456 48 1344 48
WIRE -208 80 -288 80
WIRE 224 80 192 80
WIRE 1024 96 1024 64
WIRE 1024 96 976 96
WIRE 1056 96 1024 96
WIRE 1264 96 1264 64
WIRE 1344 96 1344 48
WIRE 1344 96 1264 96
WIRE 1504 112 1504 64
WIRE 976 128 976 96
WIRE 1056 128 1056 96
WIRE 1264 128 1264 96
WIRE 1504 128 1504 112
WIRE -496 160 -496 0
WIRE -384 160 -432 160
WIRE -160 160 -160 96
WIRE 144 160 144 96
WIRE 528 160 480 160
WIRE 592 160 592 -32
WIRE -496 192 -496 160
WIRE -384 192 -384 160
WIRE 480 192 480 160
WIRE 592 192 592 160
WIRE 1056 208 1056 192
WIRE 1056 208 976 208
WIRE 1120 208 1056 208
WIRE 1216 208 1200 208
WIRE 1616 208 1552 208
WIRE 1664 208 1616 208
WIRE 1056 224 1056 208
WIRE -384 272 -448 272
WIRE -160 272 -160 160
WIRE -160 272 -384 272
WIRE -128 272 -160 272
WIRE -16 272 -64 272
WIRE 32 272 -16 272
WIRE 144 272 144 160
WIRE 144 272 96 272
WIRE 480 272 144 272
WIRE 544 272 480 272
WIRE 1264 272 1264 224
WIRE 1408 272 1264 272
WIRE 1504 272 1504 224
WIRE 1504 272 1408 272
WIRE -160 288 -160 272
WIRE 144 288 144 272
WIRE 1200 288 1200 208
WIRE 976 304 976 288
WIRE 1024 304 976 304
WIRE 1056 304 1056 288
WIRE 1056 304 1024 304
WIRE -1408 320 -1408 192
WIRE -1232 320 -1280 320
WIRE 1024 336 1024 304
WIRE -496 368 -496 288
WIRE -16 368 -16 272
WIRE -16 368 -112 368
WIRE 96 368 -16 368
WIRE 592 368 592 288
WIRE 1200 400 1200 352
WIRE -160 416 -160 384
WIRE 0 416 -160 416
WIRE 144 416 144 384
WIRE 144 416 0 416
WIRE 0 432 0 416
WIRE 1200 496 1200 480
WIRE 128 624 48 624
WIRE 208 624 128 624
WIRE 368 624 208 624
WIRE 48 672 48 624
WIRE 208 672 48 672
WIRE 224 672 208 672
WIRE 80 752 -48 752
WIRE 208 752 208 720
WIRE 208 752 80 752
WIRE 432 752 208 752
WIRE -48 800 -48 752
WIRE 432 800 432 752
WIRE 368 848 368 624
WIRE 368 848 -48 848
WIRE 432 848 368 848
WIRE -1072 864 -1088 864
WIRE -720 864 -992 864
WIRE 528 880 480 880
WIRE -592 896 -624 896
WIRE -464 896 -528 896
WIRE 80 912 80 752
WIRE -1344 976 -1408 976
WIRE -1232 976 -1264 976
WIRE -1088 976 -1088 864
WIRE -1088 976 -1152 976
WIRE -928 976 -1088 976
WIRE -720 976 -720 864
WIRE -624 976 -624 896
WIRE -624 976 -720 976
WIRE -592 976 -624 976
WIRE -464 976 -464 896
WIRE -464 976 -512 976
WIRE 432 976 432 896
WIRE 32 992 -96 992
WIRE -1344 1024 -1344 976
WIRE -1344 1024 -1360 1024
WIRE -1328 1024 -1344 1024
WIRE -1264 1024 -1280 1024
WIRE -1408 1040 -1408 976
WIRE -1408 1040 -1456 1040
WIRE -464 1040 -464 976
WIRE -48 1040 -48 896
WIRE 80 1040 80 1008
WIRE 80 1040 -48 1040
WIRE 176 1040 80 1040
WIRE -1408 1088 -1408 1040
WIRE -1360 1088 -1360 1024
WIRE -1360 1088 -1408 1088
WIRE -1344 1088 -1360 1088
WIRE -1264 1088 -1264 1024
WIRE -1232 1088 -1264 1088
WIRE -1088 1088 -1152 1088
WIRE -928 1088 -1088 1088
WIRE -624 1088 -720 1088
WIRE -592 1088 -624 1088
WIRE -464 1088 -464 1040
WIRE -464 1088 -512 1088
WIRE 80 1088 80 1040
WIRE 432 1088 432 976
WIRE -624 1136 -624 1088
WIRE -576 1136 -624 1136
WIRE -464 1136 -464 1088
WIRE -464 1136 -512 1136
WIRE -1088 1168 -1088 1088
WIRE -720 1168 -720 1088
WIRE -720 1168 -1008 1168
WIRE 176 1168 176 1040
WIRE 176 1168 128 1168
WIRE 384 1168 176 1168
FLAG 224 80 in.m
IOPIN 224 80 In
FLAG -288 80 in.p
IOPIN -288 80 In
FLAG -160 160 out1.m
FLAG 144 160 out1.p
FLAG 960 -192 0
FLAG 432 1184 0
FLAG 80 1184 0
FLAG 528 960 0
FLAG 80 1136 0
FLAG 432 1136 0
FLAG 896 -544 Vdd
FLAG -16 272 cmfb1
FLAG 432 976 cmfb1
FLAG 80 960 Vdd
FLAG 128 624 Vdd
FLAG 256 704 10umirror
FLAG 32 -112 10umirror
FLAG -16 -144 Vdd
FLAG 912 -400 10umirror
FLAG 832 -400 10umirror
FLAG 0 432 0
FLAG 144 336 0
FLAG -160 336 0
FLAG -1408 400 0
FLAG -496 368 0
FLAG 592 368 0
FLAG -1408 192 Vdd
FLAG 80 -208 cfmb2
FLAG 592 -32 Vom
IOPIN 592 -32 Out
FLAG -496 0 Vop
IOPIN -496 0 Out
FLAG -16 -352 Vdd
FLAG -160 48 Vdd
FLAG 144 48 Vdd
FLAG -496 240 0
FLAG 592 240 0
FLAG -496 -240 Vdd
FLAG 592 -240 Vdd
FLAG 1392 -96 Vdd
FLAG 1408 368 0
FLAG 1408 320 0
FLAG 1504 176 0
FLAG 1264 176 0
FLAG 1264 16 Vdd
FLAG 1504 16 Vdd
FLAG 1360 352 out1.p
FLAG 1504 112 cfmb2
FLAG 1024 64 Vom
IOPIN 1024 64 Out
FLAG 1024 336 Vop
IOPIN 1024 336 Out
FLAG 1616 208 Vbias
FLAG -928 976 in.m
IOPIN -928 976 In
FLAG -928 1088 in.p
IOPIN -928 1088 In
FLAG -720 976 Vop
IOPIN -720 976 Out
FLAG -720 1088 Vom
IOPIN -720 1088 Out
FLAG -464 1040 Vbias
FLAG -1456 1040 Vbias
FLAG -1232 400 0
FLAG -1280 320 Vbias
FLAG -96 880 out1.m
FLAG -96 992 out1.p
FLAG 1200 496 0
SYMBOL cmosn -112 288 M0
SYMATTR InstName M3
SYMATTR Value2 l=0.24u w=2u
SYMBOL cmosp -208 0 R0
SYMATTR InstName M1
SYMATTR Value2 l=0.24u w=8u
SYMBOL cmosp 32 -192 M0
SYMATTR InstName M0
SYMATTR Value2 l=0.24u w=32u
SYMBOL cmosp 192 0 M0
SYMATTR InstName M2
SYMATTR Value2 l=0.24u w=8u
SYMBOL cmosn 96 288 R0
SYMATTR InstName M4
SYMATTR Value2 l=0.24u w=2u
SYMBOL cmosp 912 -480 R0
SYMATTR InstName M5
SYMATTR Value2 l=0.24u w=.64u
SYMBOL current 960 -272 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR InstName I1
SYMATTR Value 1µ
SYMBOL voltage -1408 304 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR InstName V4
SYMATTR Value 1.8
SYMBOL cap -64 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL cap 96 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 1p
SYMBOL cmosp -96 800 R0
SYMATTR InstName Mc1
SYMATTR Value2 l=0.24u w=3.2u
SYMBOL cmosp 32 912 R0
SYMATTR InstName M6
SYMATTR Value2 l=0.24u w=3.2u
SYMBOL cmosp 480 800 M0
SYMATTR InstName Mc2
SYMATTR Value2 l=0.24u w=6.4u
SYMBOL cmosn 128 1088 M0
SYMATTR InstName Mc3
SYMATTR Value2 l=0.24u w=0.4u
SYMBOL cmosn 384 1088 R0
SYMATTR InstName Mc4
SYMATTR Value2 l=0.24u w=0.4u
SYMBOL cmosp 256 624 M0
SYMATTR InstName Mc5
SYMATTR Value2 l=0.24u w=12.8u
SYMBOL voltage 528 864 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR InstName Vcmref1
SYMATTR Value 0.63
SYMBOL cmosn -448 192 M0
SYMATTR InstName M7
SYMATTR Value2 l=0.24u w=1.33u
SYMBOL cmosp -448 -288 M0
SYMATTR InstName M8
SYMATTR Value2 l=0.24u w=16u
SYMBOL cmosn 544 192 R0
SYMATTR InstName M9
SYMATTR Value2 l=0.24u w=1.33u
SYMBOL cmosp 544 -288 R0
SYMATTR InstName M10
SYMATTR Value2 l=0.24u w=16u
SYMBOL cap -432 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.8p
SYMBOL res -368 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 1.33k
SYMBOL cap 528 144 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.8p
SYMBOL res 496 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 1.33k
SYMBOL cmosn 1360 272 R0
SYMATTR InstName M11
SYMATTR Value2 l=0.24u w=10u
SYMBOL cmosn 1216 128 R0
SYMATTR InstName M12
SYMATTR Value2 l=0.24u w=5u
SYMBOL cmosn 1552 128 M0
SYMATTR InstName M13
SYMATTR Value2 l=0.24u w=5u
SYMBOL cmosp 1312 -32 M0
SYMATTR InstName M14
SYMATTR Value2 l=0.24u w=20u
SYMBOL cmosp 1456 -32 R0
SYMATTR InstName M15
SYMATTR Value2 l=0.24u w=20u
SYMBOL res 960 112 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 960 192 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL cap 1040 128 R0
SYMATTR InstName C5
SYMATTR Value 1p
SYMBOL cap 1040 224 R0
SYMATTR InstName C6
SYMATTR Value 1p
SYMBOL res -1136 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res -1136 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res -992 1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10K
SYMATTR SpiceLine ""
SYMBOL res -976 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10K
SYMATTR SpiceLine ""
SYMBOL res -496 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 5k
SYMBOL res -496 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 5k
SYMBOL cap -528 880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 5p
SYMBOL cap -512 1120 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 5p
SYMBOL voltage -1232 304 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 ""
SYMATTR SpiceLine ""
SYMATTR InstName V3
SYMATTR Value 0.9
SYMBOL voltage -1248 1088 M270
WINDOW 123 24 132 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 0.0001
SYMATTR SpiceLine ""
SYMATTR InstName V1
SYMATTR Value SINE(0 0.001 100k)
SYMBOL e2 -1248 976 M270
SYMATTR InstName E2
SYMATTR Value 1
SYMBOL voltage 1200 384 R0
WINDOW 123 24 132 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 0.0001
SYMATTR SpiceLine ""
SYMATTR InstName V6
SYMATTR Value SINE(0 0.001 100k)
SYMBOL cap 1216 288 M0
SYMATTR InstName C8
SYMATTR Value 1
SYMBOL res 1216 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10g
SYMBOL cap -432 -144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 100f
SYMBOL cap 592 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 100f
TEXT 1168 -576 Left 2 !.INCLUE tsmc018.lib
TEXT 1168 -536 Left 2 !.INCLUDE opamp.sub
TEXT -1112 -552 Left 2 !;op
TEXT -152 632 Left 2 !;ac oct 15 1 10g
TEXT -1112 -528 Left 2 !;ac oct 15 1 10g
TEXT 1040 -320 Left 2 ;scale 10
TEXT 264 -8 Left 2 ;SCALE 4
TEXT 1648 16 Left 2 ;SCLE 4
TEXT -1120 568 Left 2 !.tran 0 10us 0
